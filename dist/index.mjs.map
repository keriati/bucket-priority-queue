{"version":3,"sources":["../src/BucketQueue.ts"],"sourcesContent":["export type Integer = number;\nexport type Priority = Integer;\n\nexport class BucketQueue<T> {\n  private buckets: T[][] = new Array(100);\n\n  private priorityMax = 0;\n\n  private priorityMin = 0;\n\n  private _size = 0;\n\n  constructor(items: [T, Priority][] = []) {\n    for (let i = 0; i < items.length; i++) {\n      const [item, priority] = items[i];\n      this.push(item, priority);\n    }\n  }\n\n  push(item: T, priority: Priority): void {\n    if (!this.buckets[priority]) {\n      this.buckets[priority] = new Array(1000);\n    }\n    this.buckets[priority].push(item);\n    if (this._size === 0) {\n      this.priorityMin = priority;\n      this.priorityMax = priority;\n    } else {\n      if (priority > this.priorityMax) this.priorityMax = priority;\n      if (priority < this.priorityMin) this.priorityMin = priority;\n    }\n    this._size++;\n  }\n\n  private pop(position: \"priorityMin\" | \"priorityMax\"): T | undefined {\n    if (!this._size) return undefined;\n    const bucket = this.buckets[this[position]];\n    const item = bucket!.pop();\n    if (!bucket!.length) {\n      for (let i = 0; i < this.buckets.length; i++) {\n        if (this.buckets[i]?.length > 0) {\n          this.priorityMin = i;\n          break;\n        }\n      }\n      for (let i = this.buckets.length - 1; i >= 0; i--) {\n        if (this.buckets[i]?.length > 0) {\n          this.priorityMax = i;\n          break;\n        }\n      }\n    }\n    this._size--;\n    return item;\n  }\n\n  popHighest(): T | undefined {\n    return this.pop(\"priorityMax\");\n  }\n\n  popLowest(): T | undefined {\n    return this.pop(\"priorityMin\");\n  }\n\n  get size(): Integer {\n    return this._size;\n  }\n}\n"],"mappings":";AAGO,IAAM,cAAN,MAAqB;AAAA,EAS1B,YAAY,QAAyB,CAAC,GAAG;AARzC,SAAQ,UAAiB,IAAI,MAAM,GAAG;AAEtC,SAAQ,cAAc;AAEtB,SAAQ,cAAc;AAEtB,SAAQ,QAAQ;AAGd,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,YAAM,CAAC,MAAM,QAAQ,IAAI,MAAM,CAAC;AAChC,WAAK,KAAK,MAAM,QAAQ;AAAA,IAC1B;AAAA,EACF;AAAA,EAEA,KAAK,MAAS,UAA0B;AACtC,QAAI,CAAC,KAAK,QAAQ,QAAQ,GAAG;AAC3B,WAAK,QAAQ,QAAQ,IAAI,IAAI,MAAM,GAAI;AAAA,IACzC;AACA,SAAK,QAAQ,QAAQ,EAAE,KAAK,IAAI;AAChC,QAAI,KAAK,UAAU,GAAG;AACpB,WAAK,cAAc;AACnB,WAAK,cAAc;AAAA,IACrB,OAAO;AACL,UAAI,WAAW,KAAK;AAAa,aAAK,cAAc;AACpD,UAAI,WAAW,KAAK;AAAa,aAAK,cAAc;AAAA,IACtD;AACA,SAAK;AAAA,EACP;AAAA,EAEQ,IAAI,UAAwD;AAlCtE;AAmCI,QAAI,CAAC,KAAK;AAAO,aAAO;AACxB,UAAM,SAAS,KAAK,QAAQ,KAAK,QAAQ,CAAC;AAC1C,UAAM,OAAO,OAAQ,IAAI;AACzB,QAAI,CAAC,OAAQ,QAAQ;AACnB,eAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,QAAQ,KAAK;AAC5C,cAAI,UAAK,QAAQ,CAAC,MAAd,mBAAiB,UAAS,GAAG;AAC/B,eAAK,cAAc;AACnB;AAAA,QACF;AAAA,MACF;AACA,eAAS,IAAI,KAAK,QAAQ,SAAS,GAAG,KAAK,GAAG,KAAK;AACjD,cAAI,UAAK,QAAQ,CAAC,MAAd,mBAAiB,UAAS,GAAG;AAC/B,eAAK,cAAc;AACnB;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,SAAK;AACL,WAAO;AAAA,EACT;AAAA,EAEA,aAA4B;AAC1B,WAAO,KAAK,IAAI,aAAa;AAAA,EAC/B;AAAA,EAEA,YAA2B;AACzB,WAAO,KAAK,IAAI,aAAa;AAAA,EAC/B;AAAA,EAEA,IAAI,OAAgB;AAClB,WAAO,KAAK;AAAA,EACd;AACF;","names":[]}