{"version":3,"sources":["../src/index.ts","../src/BucketQueue.ts"],"sourcesContent":["export { BucketQueue } from \"./BucketQueue\";\n","export type Integer = number;\nexport type Priority = Integer;\n\nexport class BucketQueue<T> {\n  private buckets: T[][] = [];\n\n  private priorityMax = 0;\n\n  private priorityMin = 0;\n\n  private _size = 0;\n\n  constructor(items: [T, Priority][] = []) {\n    for (let i = 0; i < items.length; i++) {\n      const [item, priority] = items[i];\n      this.push(item, priority);\n    }\n  }\n\n  push(item: T, priority: Priority): void {\n    if (!this.buckets[priority]) {\n      this.buckets[priority] = [];\n    }\n    this.buckets[priority].push(item);\n    if (this._size === 0) {\n      this.priorityMin = priority;\n      this.priorityMax = priority;\n    } else {\n      if (priority > this.priorityMax) this.priorityMax = priority;\n      if (priority < this.priorityMin) this.priorityMin = priority;\n    }\n    this._size++;\n  }\n\n  private pop(position: \"priorityMin\" | \"priorityMax\"): T | undefined {\n    if (!this._size) return undefined;\n    const bucket = this.buckets[this[position]];\n    const item = bucket!.pop();\n    if (bucket.length === 0) {\n      for (let i = 0; i < this.buckets.length; i++) {\n        if (this.buckets[i]?.length > 0) {\n          this.priorityMin = i;\n          break;\n        }\n      }\n      for (let i = this.buckets.length - 1; i >= 0; i--) {\n        if (this.buckets[i]?.length > 0) {\n          this.priorityMax = i;\n          break;\n        }\n      }\n    }\n    this._size--;\n    return item;\n  }\n\n  popHighest(): T | undefined {\n    return this.pop(\"priorityMax\");\n  }\n\n  popLowest(): T | undefined {\n    return this.pop(\"priorityMin\");\n  }\n\n  get size(): Integer {\n    return this._size;\n  }\n}\n"],"mappings":"yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,iBAAAE,IAAA,eAAAC,EAAAH,GCGO,IAAMI,EAAN,KAAqB,CAS1B,YAAYC,EAAyB,CAAC,EAAG,CARzC,KAAQ,QAAiB,CAAC,EAE1B,KAAQ,YAAc,EAEtB,KAAQ,YAAc,EAEtB,KAAQ,MAAQ,EAGd,QAAS,EAAI,EAAG,EAAIA,EAAM,OAAQ,IAAK,CACrC,GAAM,CAACC,EAAMC,CAAQ,EAAIF,EAAM,CAAC,EAChC,KAAK,KAAKC,EAAMC,CAAQ,CAC1B,CACF,CAEA,KAAKD,EAASC,EAA0B,CACjC,KAAK,QAAQA,CAAQ,IACxB,KAAK,QAAQA,CAAQ,EAAI,CAAC,GAE5B,KAAK,QAAQA,CAAQ,EAAE,KAAKD,CAAI,EAC5B,KAAK,QAAU,GACjB,KAAK,YAAcC,EACnB,KAAK,YAAcA,IAEfA,EAAW,KAAK,cAAa,KAAK,YAAcA,GAChDA,EAAW,KAAK,cAAa,KAAK,YAAcA,IAEtD,KAAK,OACP,CAEQ,IAAIC,EAAwD,CAlCtE,IAAAC,EAAAC,EAmCI,GAAI,CAAC,KAAK,MAAO,OACjB,IAAMC,EAAS,KAAK,QAAQ,KAAKH,CAAQ,CAAC,EACpCF,EAAOK,EAAQ,IAAI,EACzB,GAAIA,EAAO,SAAW,EAAG,CACvB,QAASC,EAAI,EAAGA,EAAI,KAAK,QAAQ,OAAQA,IACvC,KAAIH,EAAA,KAAK,QAAQG,CAAC,IAAd,YAAAH,EAAiB,QAAS,EAAG,CAC/B,KAAK,YAAcG,EACnB,KACF,CAEF,QAASA,EAAI,KAAK,QAAQ,OAAS,EAAGA,GAAK,EAAGA,IAC5C,KAAIF,EAAA,KAAK,QAAQE,CAAC,IAAd,YAAAF,EAAiB,QAAS,EAAG,CAC/B,KAAK,YAAcE,EACnB,KACF,CAEJ,CACA,YAAK,QACEN,CACT,CAEA,YAA4B,CAC1B,OAAO,KAAK,IAAI,aAAa,CAC/B,CAEA,WAA2B,CACzB,OAAO,KAAK,IAAI,aAAa,CAC/B,CAEA,IAAI,MAAgB,CAClB,OAAO,KAAK,KACd,CACF","names":["src_exports","__export","BucketQueue","__toCommonJS","BucketQueue","items","item","priority","position","_a","_b","bucket","i"]}