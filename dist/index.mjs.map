{"version":3,"sources":["../src/BucketQueue.ts"],"sourcesContent":["export type Integer = number;\nexport type Priority = Integer;\n\nexport class BucketQueue<T> {\n  buckets: Map<number, T[]> = new Map();\n\n  private priorityMax = 0;\n\n  private priorityMin = 0;\n\n  private _size = 0;\n\n  constructor(items: [T, Priority][] = []) {\n    for (let i = 0; i < items.length; i++) {\n      const [item, priority] = items[i];\n      this.push(item, priority);\n    }\n  }\n\n  push(item: T, priority: Priority): void {\n    if (!this.buckets.has(priority)) {\n      this.buckets.set(priority, []);\n    }\n    this.buckets.get(priority)!.push(item);\n    if (this._size === 0) {\n      this.priorityMin = priority;\n      this.priorityMax = priority;\n    } else {\n      if (priority > this.priorityMax) this.priorityMax = priority;\n      if (priority < this.priorityMin) this.priorityMin = priority;\n    }\n    this._size++;\n  }\n\n  popHighest(): T | undefined {\n    if (!this._size) return undefined;\n    const bucket = this.buckets.get(this.priorityMax);\n    const item = bucket!.pop();\n    if (!bucket!.length) {\n      this.buckets.delete(this.priorityMax);\n      const bucketKeys = Array.from(this.buckets.keys());\n      this.priorityMax = Math.max(...bucketKeys);\n      this.priorityMin = Math.min(...bucketKeys);\n    }\n    this._size--;\n    return item;\n  }\n\n  popLowest(): T | undefined {\n    if (!this._size) return undefined;\n    const bucket = this.buckets.get(this.priorityMin);\n    const item = bucket!.pop();\n    if (!bucket!.length) {\n      this.buckets.delete(this.priorityMin);\n      const bucketKeys = Array.from(this.buckets.keys());\n      this.priorityMax = Math.max(...bucketKeys);\n      this.priorityMin = Math.min(...bucketKeys);\n    }\n    this._size--;\n    return item;\n  }\n\n  get size(): Integer {\n    return this._size;\n  }\n}\n"],"mappings":";AAGO,IAAM,cAAN,MAAqB;AAAA,EAS1B,YAAY,QAAyB,CAAC,GAAG;AARzC,mBAA4B,oBAAI,IAAI;AAEpC,SAAQ,cAAc;AAEtB,SAAQ,cAAc;AAEtB,SAAQ,QAAQ;AAGd,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,YAAM,CAAC,MAAM,QAAQ,IAAI,MAAM,CAAC;AAChC,WAAK,KAAK,MAAM,QAAQ;AAAA,IAC1B;AAAA,EACF;AAAA,EAEA,KAAK,MAAS,UAA0B;AACtC,QAAI,CAAC,KAAK,QAAQ,IAAI,QAAQ,GAAG;AAC/B,WAAK,QAAQ,IAAI,UAAU,CAAC,CAAC;AAAA,IAC/B;AACA,SAAK,QAAQ,IAAI,QAAQ,EAAG,KAAK,IAAI;AACrC,QAAI,KAAK,UAAU,GAAG;AACpB,WAAK,cAAc;AACnB,WAAK,cAAc;AAAA,IACrB,OAAO;AACL,UAAI,WAAW,KAAK;AAAa,aAAK,cAAc;AACpD,UAAI,WAAW,KAAK;AAAa,aAAK,cAAc;AAAA,IACtD;AACA,SAAK;AAAA,EACP;AAAA,EAEA,aAA4B;AAC1B,QAAI,CAAC,KAAK;AAAO,aAAO;AACxB,UAAM,SAAS,KAAK,QAAQ,IAAI,KAAK,WAAW;AAChD,UAAM,OAAO,OAAQ,IAAI;AACzB,QAAI,CAAC,OAAQ,QAAQ;AACnB,WAAK,QAAQ,OAAO,KAAK,WAAW;AACpC,YAAM,aAAa,MAAM,KAAK,KAAK,QAAQ,KAAK,CAAC;AACjD,WAAK,cAAc,KAAK,IAAI,GAAG,UAAU;AACzC,WAAK,cAAc,KAAK,IAAI,GAAG,UAAU;AAAA,IAC3C;AACA,SAAK;AACL,WAAO;AAAA,EACT;AAAA,EAEA,YAA2B;AACzB,QAAI,CAAC,KAAK;AAAO,aAAO;AACxB,UAAM,SAAS,KAAK,QAAQ,IAAI,KAAK,WAAW;AAChD,UAAM,OAAO,OAAQ,IAAI;AACzB,QAAI,CAAC,OAAQ,QAAQ;AACnB,WAAK,QAAQ,OAAO,KAAK,WAAW;AACpC,YAAM,aAAa,MAAM,KAAK,KAAK,QAAQ,KAAK,CAAC;AACjD,WAAK,cAAc,KAAK,IAAI,GAAG,UAAU;AACzC,WAAK,cAAc,KAAK,IAAI,GAAG,UAAU;AAAA,IAC3C;AACA,SAAK;AACL,WAAO;AAAA,EACT;AAAA,EAEA,IAAI,OAAgB;AAClB,WAAO,KAAK;AAAA,EACd;AACF;","names":[]}